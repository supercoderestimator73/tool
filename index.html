<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tool</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; max-width: 900px; }
  h1 { font-size: 18px; margin: 0 0 10px; }
  input, select, button { padding: 10px; font-size: 16px; margin: 4px 0; }
  button { cursor:pointer; }
  .card { border:1px solid #ddd; border-radius:8px; padding:12px; margin-top:15px; }
  .row { display:grid; grid-template-columns: 1fr 120px 80px 140px; gap:8px; margin-bottom:8px; }
  .totals { display:flex; justify-content:space-between; font-size:18px; font-weight:bold; }
  .hidden { display:none; }
  .center { text-align:center; margin-top:100px; }
  .muted { color:#666; font-size: 13px; }
</style>
</head>
<body>

<div id="gate" class="center">
  <h1>Access</h1>
  <input type="password" id="pw" placeholder="Password" autocomplete="current-password">
  <br>
  <button onclick="enter()">Enter</button>
  <div class="muted" style="margin-top:10px;"> </div>
</div>

<div id="app" class="hidden">
  <h1>Tool</h1>
  <div class="card">
    <div class="row" style="font-weight:bold;">
      <div>Item</div>
      <div>Cost</div>
      <div>Qty</div>
      <div>Type</div>
    </div>
    <div id="items"></div>
    <button onclick="addItem()">+ Add</button>
  </div>

  <div class="card">
    <div class="totals">
      <div>Total</div>
      <div id="total">$0.00</div>
    </div>
  </div>
</div>

<script>
  // Tool
  const PASSWORD = "Tool";

  // Rate tables (generic)
  const RATES = {
    Materials: [
      { min:0, max:100, markup:1.22 },
      { min:100.01, max:500, markup:0.82 },
      { min:500.01, max:5000, markup:0.67 },
      { min:5000.01, max:Infinity, markup:0.55 }
    ],
    Equipment: [
      { min:0, max:10000, markup:0.60 },
      { min:10000.01, max:50000, markup:0.55 },
      { min:50000.01, max:Infinity, markup:0.50 }
    ],
    Other: [
      { min:0, max:Infinity, markup:0.55 }
    ]
  };

  function enter(){
    if(document.getElementById('pw').value === PASSWORD){
      document.getElementById('gate').classList.add('hidden');
      document.getElementById('app').classList.remove('hidden');
    } else {
      alert("Incorrect password");
    }
  }

  function getTier(type, cost){
    const tiers = RATES[type] || RATES.Materials;
    return tiers.find(t => cost >= t.min && cost <= t.max) || tiers[0];
  }

  function fmt(n){
    return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(n || 0);
  }

  function addItem(){
    const row = document.createElement('div');
    row.className='row';
    row.innerHTML = `
      <input placeholder="Item">
      <input placeholder="0.00" inputmode="decimal">
      <input value="1" inputmode="numeric">
      <select>
        <option>Materials</option>
        <option>Equipment</option>
        <option>Other</option>
      </select>
    `;
    row.querySelectorAll('input,select').forEach(x => x.addEventListener('input',recalc));
    document.getElementById('items').appendChild(row);
    recalc();
  }

  function recalc(){
    let total = 0;
    document.querySelectorAll('#items .row').forEach(row=>{
      const cost = parseFloat(row.children[1].value) || 0;
      const qty = parseFloat(row.children[2].value) || 1;
      const type = row.children[3].value;

      const tier = getTier(type, cost);
      const sell = cost * (1 + tier.markup);
      total += sell * qty;
    });
    document.getElementById('total').innerText = fmt(total);
  }

  addItem();
  addItem();
</script>

</body>
</html>

